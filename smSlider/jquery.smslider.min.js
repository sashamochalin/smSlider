/*
 * smSlider 0.1
 * http://sashamochalin.github.io/smSlider/
 *
 * Copyright Â© 2013 Sasha Mochalin
 */
(function(e){e.fn.smSlider=function(t){var n={namespace:"sm",start:0,transition:"animate",activeClass:"active",autoArr:true,innerBlock:"sm_slider-inner",prev:"sm_prev",next:"sm_next",children:"sm_slide",pagination:true,typeCtrl:"dots",subMenu:false,subMenuClass:"sm_submenu-item",autoPlay:false,delay:5e3,hoverPause:true,easing:"swing",duration:600,flexible:false,animationStart:function(){},animationComplete:function(){}};var t=e.extend(n,t);return this.each(function(){var n=true;var r=function(r,i){if(n){n=false;var s=o;var u=-1*s;if(i=="next"){currPos=u;nextPos=s}else{currPos=s;nextPos=u}if(t.transition!="fader"){a.children("."+t.children+"."+t.activeClass).stop().animate({left:currPos},{duration:t.duration,easing:t.easing,complete:function(){e(this).removeClass(t.activeClass);if(t.animationComplete){t.animationComplete(r)}}});f.eq(r).css("left",nextPos).addClass(t.activeClass).stop().animate({left:0},{duration:t.duration,easing:t.easing,complete:function(){n=true}})}else{a.children("."+t.children+"."+t.activeClass).stop().fadeOut({duration:t.duration,easing:t.easing,complete:function(){e(this).removeClass(t.activeClass);if(t.animationComplete){t.animationComplete(r)}}});f.eq(r).stop().fadeIn({duration:t.duration,easing:t.easing,complete:function(){n=true}}).addClass(t.activeClass)}if(t.animationStart){t.animationStart(r)}if(t.pagination){m.removeClass(t.activeClass);m.eq(r).addClass(t.activeClass)}if(t.subMenu){g.removeClass(t.activeClass);g.eq(r).addClass(t.activeClass)}}else{return false}};var s=e(this);var o=s.width();var u=s.height();if(t.flexible){e(window).resize(function(){o=s.width()})}var a=s.children("ul").addClass(t.innerBlock);a.css({height:u,overflow:"hidden",position:"relative",width:"100%"});var f=a.children("li").addClass(t.children);var l=f.length;if(t.start>l-1){var c=l-1}else{var c=t.start}f.appendTo(a);f.eq(c).addClass(t.activeClass);if(l>1){var h=e("<i/>");if(t.autoArr){var p=h.clone().addClass(t.prev);var d=h.clone().addClass(t.next);p.appendTo(s);d.appendTo(s)}else{var p=e("."+t.prev);var d=e("."+t.next)}if(t.pagination){var v=e("<ul/>").addClass("sm_nav");var m=e("<li/>");v.appendTo(s);if(t.typeCtrl!="numeric"){for(i=l;i>0;i--){m.clone().data({index:i-1}).addClass("sm_nav-item").html(h.clone()).prependTo(v)}}else{for(i=l;i>0;i--){m.clone().data({index:i-1}).addClass("sm_nav-item").text(i).prependTo(v)}}var m=s.find(".sm_nav-item");m.eq(c).addClass(t.activeClass)}if(t.subMenu){var g=e("."+t.subMenuClass);g.eq(c).addClass(t.activeClass)}if(t.autoPlay){var y=null;var b=function(){c++;if(c>=l){c=0}r(c,"next")};y=setInterval(b,t.delay);if(t.hoverPause){e(this).hover(function(){y=clearInterval(y)},function(){y=setInterval(b,t.delay)})}}p.on("click",function(){if(n){c--;if(c<0){c=l-1}r(c,"prev")}});d.on("click",function(){if(n){c++;if(c>=l){c=0}r(c,"next")}});if(t.pagination){m.on("click",function(){if(n){navIndex=e(this).data("index");console.log(navIndex);if(navIndex>c){direction="next"}else{direction="prev"}if(e(this).data("index")!=c){c=navIndex;r(c,direction)}}})}if(t.subMenu){g.on("click",function(){if(n){subIndex=e(this).data("index");if(subIndex>c){direction="next"}else{direction="prev"}if(subIndex!=c&&subIndex<=l-1){c=subIndex;r(c,direction)}}})}}})}})(jQuery)